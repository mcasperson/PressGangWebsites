INSTRUCTIONS FOR USE
====================

1. Include the css file: 
   `<link rel="stylesheet" type="text/css" href="pressgang_websites.css">`
2. Include the main script: 
   `<script type="application/javascript" src="pressgang_websites.js"></script>`
3. Include the script generated by the csprocessor: 
   `<script type="application/javascript" src="pressgang_website.js"></script>`
4. Set the base URL to the chunked HTML sections: 
   `<script type="application/javascript">pressgang_website_base = "http://docs.mysite.com/MyBook/en-US/html";</script>`
5. Add the data-pressgangtopic attribute with the value of the topic id to elements that should display a help topic: 
   `<textarea data-pressgangtopic="21465"></textarea>`
6. Call the `pressgang_website_enable()` function to display the help overlay.

TIPS FOR CREATING PUBLICAN BRANDS
=================================
When build books, make sure the option

chunk_first: 1

is defined in the publican.cfg file.

Add the following to the html.xsl file in the Publican brand:

<xsl:variable name="jquery"><![CDATA[
    <!-- jquery minified code goes here -->
]]></xsl:variable>

<xsl:variable name="script"><![CDATA[
    function inIframe () {
        var retValue = true;
        try {
            retValue = window.self !== window.top;
        } catch (e) {
            /*
                We will receive an exception in Chrome if viewing a page from a file:// protocol.
                The only way around this is the --allow-file-access-from-files command line option.
            */
        }
        return retValue;
    }

    /*
        When the DOM is ready (and if we are in an iframe), remove headers and footers, and change all
        links to open in new pages.
    */
    jQuery(function() {
        if (inIframe()) {
            var title = document.getElementById("title");
            if (title) {
               title.parentNode.removeChild(title);
            }

            var topNavigationElements = document.querySelectorAll("ul[class='docnav top']");
            if (topNavigationElements.length !== 0) {
               topNavigationElements[0].parentNode.removeChild(topNavigationElements[0]);
            }

            var bottomNavigationElements = document.querySelectorAll("ul[class='docnav']");
            if (bottomNavigationElements.length !== 0) {
               bottomNavigationElements[0].parentNode.removeChild(bottomNavigationElements[0]);
            }

            var links = document.getElementsByTagName("a");
            for (var linkIndex = 0, linkCount = links.length; linkIndex < linkCount; ++linkIndex) {
               var link = links[linkIndex];
               link.setAttribute("target", "_blank");
            }
        }
    });
]]></xsl:variable>

<xsl:template name="user.head.content">
    <xsl:element name="script">
    <xsl:attribute name="type">text/javascript</xsl:attribute>
    <xsl:value-of select="$jquery" disable-output-escaping="yes"/>
    <xsl:value-of select="$script" disable-output-escaping="yes"/>
    </xsl:element>
</xsl:template>



